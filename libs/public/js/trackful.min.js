(function(){window.TRACKFUL_KEY=window.TRACKFUL_KEY||null;var d=window.TRACKFUL_KEY,f=0;if(null!=d){navigator.sendBeacon=navigator.sendBeacon||function(a,c){var b=new XMLHttpRequest;b.open("POST",a,!1);b.setRequestHeader("Content-Type","application/json");b.withCredentials=!1;b.send(JSON.stringify(c))};hit=function(a){hitData={key:a,page:window.location.href};useSender("/endpoint/hits",hitData)};incMS=function(){f+=1E3};useSender=function(a,c){var b=new XMLHttpRequest;b.open("POST",a,!0);b.setRequestHeader("Content-Type",
"application/json");b.withCredentials=!1;b.onreadystatechange=function(){4!=b.readyState&&200!=b.status&&console.error("Trackful: Somethings going wrong with tracking. Visit http://trackful.io to cross check your setup again.")};b.send(JSON.stringify(c))};msHandler=function(a){navigator.sendBeacon("/endpoint/session/time",{key:d,ms:f,page:window.location.href})};trackHandler=function(a){a={key:d,tracker:a.target.getAttribute("data-track")};useSender("/endpoint/clicks",a);return!0};newTrackMap=function(a){a=
document.querySelectorAll("[data-track]");for(var c=0;c<a.length;c++)a[c].addEventListener("click",trackHandler)};window.trackfulTimer={onFocus:function(){clearInterval(e);e=setInterval(incMS,1E3)},onBlur:function(){clearInterval(e)}};window.addEventListener?window.addEventListener("load",function(){window.addEventListener("focus",window.trackfulTimer.onFocus);window.addEventListener("blur",window.trackfulTimer.onBlur)}):window.attachEvent?window.attachEvent("onload",function(){window.attachEvent("onfocus",
window.trackfulTimer.onFocus);window.attachEvent("onblur",window.trackfulTimer.onBlur)}):window.onload=function(){window.onfocus=window.trackfulTimer.onFocus;window.onblur=window.trackfulTimer.onBlur};var e=setInterval(incMS,1E3);window.addEventListener("unload",msHandler,!1);newTrackMap(null);hit(d)}else console.debug("Trackful: You haven't initalised your track key. Assign it to window.TRACKFUL_KEY")})();
